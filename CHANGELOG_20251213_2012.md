# 변경사항 - 2025년 12월 13일 20:12

## 백업 태그
`backup_20251213_2012`

## 주요 변경사항

### 1. 세션 관리 개선 (쿠키 기반 동기화)

**문제점:**
- 로그인 후 다른 페이지로 이동 시 세션이 유지되지 않음
- 서버 측 쿠키와 클라이언트 측 세션이 분리되어 동기화 문제 발생
- 모든 보호된 페이지에서 반복적으로 로그인 요구

**해결책:**
- API Route 쿠키를 httpOnly에서 일반 쿠키로 변경하여 클라이언트 접근 허용
- 클라이언트 Supabase 설정에 쿠키 핸들러 추가
- 서버와 클라이언트가 같은 쿠키(`sb-access-token`, `sb-refresh-token`) 공유

**수정 파일:**
- `app/api/auth/login/route.ts`: httpOnly 플래그를 false로 변경
- `lib/supabase/client.ts`: 쿠키 읽기/쓰기/삭제 핸들러 구현

**커밋:** `8ea4545` - "쿠키 기반 세션 관리로 클라이언트-서버 동기화 개선"

---

### 2. 채팅 페이지 메시지 영역 개선

**문제점:**
- 채팅 메시지가 하단 입력 영역과 네비게이션 바에 가려짐
- 마지막 메시지를 읽을 수 없는 UI 문제

**해결책:**
- 메시지 영역의 하단 패딩을 `pb-40` (160px)에서 `pb-52` (208px)로 증가
- 입력 영역과 네비게이션 바를 고려한 충분한 여백 확보

**수정 파일:**
- `app/(main)/chats/[roomId]/page.tsx`: 메시지 컨테이너 패딩 조정

**커밋:** `ae8b666` - "채팅 페이지 메시지 영역 패딩 증가"

---

### 3. 새 게시물 작성 페이지 테마 적용

**문제점:**
- 라이트 모드에서 배경이 어둡게 표시되어 가독성 저하
- 고정 그라디언트 배경이 테마 설정을 무시

**해결책:**
- 고정 색상 그라디언트를 제거하고 `bg-background`로 변경
- 라이트/다크 모드에 따라 배경색 자동 조정

**수정 파일:**
- `app/(main)/post/new/page.tsx`: 배경 클래스 변경

**커밋:** `5d05763` - "새 게시물 작성 페이지 테마 배경 수정"

---

## 기술 스택
- Next.js 15.5.9
- React 18.3.1
- Supabase (@supabase/ssr, @supabase/supabase-js)
- TypeScript
- Tailwind CSS

## 배포
- 플랫폼: Vercel
- 자동 배포: GitHub main 브랜치 푸시 시
- 환경 변수:
  - `NEXT_PUBLIC_SUPABASE_URL`
  - `NEXT_PUBLIC_SUPABASE_ANON_KEY`

## 다음 단계
- [ ] 로그아웃 API Route 추가 및 세션 정리
- [ ] 자동 토큰 갱신 로직 구현
- [ ] 추가 UI/UX 개선사항 확인

---

## 커밋 히스토리
```
5d05763 - 새 게시물 작성 페이지 테마 배경 수정
ae8b666 - 채팅 페이지 메시지 영역 패딩 증가
8ea4545 - 쿠키 기반 세션 관리로 클라이언트-서버 동기화 개선
2bb8f08 - Middleware 추가 및 클라이언트 세션 설정으로 인증 개선
92d6104 - 로그인 시 세션 쿠키 설정 추가
```
